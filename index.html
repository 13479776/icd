<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>icd by jackwasey</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">icd</h1>
      <h2 class="project-tagline">ICD-9 and ICD-10 code manipulation and validation in R</h2>
      <a href="https://github.com/jackwasey/icd" class="btn">View on GitHub</a>
      <a href="https://github.com/jackwasey/icd/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/jackwasey/icd/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      



<h1>
<a id="icd" class="anchor" href="#icd" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>icd</h1>

<h2>
<a id="icd-statistics-based-on-rstudio-mirror" class="anchor" href="#icd-statistics-based-on-rstudio-mirror" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>icd statistics, based on RStudio mirror</h2>

<p><a href="https://cran.r-project.org/package=icd"><img src="http://www.r-pkg.org/badges/version/icd" alt="CRAN version"></a> <a href="https://cran.r-project.org/package=icd"><img src="http://cranlogs.r-pkg.org/badges/icd" alt="CRAN RStudio mirror downloads"></a> <a href="https://travis-ci.org/jackwasey/icd"><img src="https://travis-ci.org/jackwasey/icd.svg?branch=master" alt="Build Status"></a> <a href="https://codecov.io/github/jackwasey/icd?branch=master"><img src="https://codecov.io/github/jackwasey/icd/coverage.svg?branch=master" alt="codecov.io"></a> <a href="https://coveralls.io/github/jackwasey/icd?branch=master"><img src="https://coveralls.io/repos/github/jackwasey/icd/badge.svg?branch=master" alt="Coverage Status"></a></p>

<h2>
<a id="old-package-icd9-statistics" class="anchor" href="#old-package-icd9-statistics" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Old package icd9 statistics</h2>

<p><a href="https://cran.r-project.org/package=icd9"><img src="http://www.r-pkg.org/badges/version/icd9" alt="CRAN version"></a> <a href="https://cran.r-project.org/package=icd9"><img src="http://cranlogs.r-pkg.org/badges/icd9" alt="CRAN RStudio mirror downloads"></a></p>

<h1>
<a id="icd-9-and-icd-10-comorbidities-manipulation-and-validation" class="anchor" href="#icd-9-and-icd-10-comorbidities-manipulation-and-validation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>ICD-9 and ICD-10 comorbidities, manipulation and validation</h1>

<h2>
<a id="features" class="anchor" href="#features" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Features</h2>

<ul>
<li>  find comorbidities of patients based on admission or discharge ICD-9 or ICD-10 codes, e.g. Cancer, Heart Disease

<ul>
<li>  several standard mappings of ICD codes to comorbidities are included (Quan, Deyo, Elixhauser, AHRQ)</li>
<li>  very fast assignment of ICD codes to comorbidities (using C and C++ internally, with automatic parallel execution using OpenMP when available), assigning millions of comorbidities in a few seconds</li>
</ul>
</li>
<li>  Charlson and Van Walraven score calculations</li>
<li>  validation of ICD codes from different annual revisions of ICD-9-CM and ICD-10-CM</li>
<li>  summarizing ICD codes into groups, and to human-readable descriptions</li>
<li>  correct conversion between different representations of ICD codes, with and without a decimal points, leading and trailing characters (this is not trivial for ICD-9-CM). ICD-9 to ICD-10 conversion is left as an exercise for the user!</li>
<li>  comprehensive test suite to increase confidence in accurate processing of ICD codes</li>
</ul>

<h2>
<a id="new-since-last-cran-release" class="anchor" href="#new-since-last-cran-release" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>New since last CRAN release:</h2>

<ul>
<li>  major new release, version 2.0, with addition of ICD-10 processing, and therefore renaming to <code>icd</code>
</li>
<li>  functions simplified so they apply to ICD-9 and ICD-10, e.g. <code>icd9ComorbidAhrq</code> becomes <code>icd_comorbid_ahrq</code> (alongside <code>icd9_comorbid_ahrq</code> and <code>icd10_comorbid_ahrq</code> which skip the step to guess the ICD version).</li>
<li>  major update to all function names following <a href="http://adv-r.had.co.nz/Style.html">Hadley Wickham</a>, <a href="https://google.github.io/styleguide/Rguide.xml">google</a> and <a href="https://github.com/jimhester/lintr">lintr</a>.</li>
<li>  All function and variable names with <em>camelCase</em> are now deprecated in favor of <em>snake_case</em>. SnakeCase function names still work, but will give deprecated warnings (which can be muted)</li>
<li>  use of basic S3 classes to allow users the option of distinguishing the type of their data. E.g. <code>as.icd9(c("0010", "0011"))</code> defines two ICD-9 codes, <code>as.icd10cm(c("A01", "A011"))</code> defines two ICD-10-CM codes (which are implicitly ICD-10 codes also). This can be extended to add other variants, such as ICD-10 WHO (work in progress), and national variations.</li>
<li>  see NEWS.md, vignettes and github <a href="https://github.com/jackwasey/icd/commits/master">changelog</a> for more details</li>
</ul>

<h2>
<a id="introduction" class="anchor" href="#introduction" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Introduction</h2>

<p>Calculate comorbidities, Charlson scores, perform fast and accurate validation, conversion, manipulation, filtering and comparison of ICD-9-CM (clinical modification) codes. ICD-9 codes appear numeric but leading and trailing zeroes, and both decimal and non-decimal "short" format codes exist. The package enables a work flow from raw lists of ICD-9 codes from hospital billing databases to comorbidities. ICD-9 to comorbidity mappings from Quan (Deyo and Elixhauser versions), Elixhauser and AHRQ included. Any other mapping of codes, such as ICD-10, to comorbidities can be used.</p>

<h2>
<a id="relevance" class="anchor" href="#relevance" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Relevance</h2>

<p>ICD-9 codes are still in heavy use around the world, particularly in the USA where the ICD-9-CM (Clinical Modification) was in widespread use until the end of 2015. ICD-10 has been used worldwide for reporting cause of death for more than a decade. ICD-10-CM is now the primary coding scheme for US hospital admission and discharge diagnoses used for regulatory purposes and billing. A vast amount of patient data is recorded with ICD-9 codes of some kind: this package enables their use in R alongside ICD-10.</p>

<h2>
<a id="comorbidities" class="anchor" href="#comorbidities" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Comorbidities</h2>

<p>A common requirement for medical research involving patients is determining new or existing comorbidities. This is often reported in <em>Table 1</em> of research papers to demonstrate the similarity or differences of groups of patients. This package is focussed on fast and accurate generation of this comorbidity information from raw lists of ICD-9 codes.</p>

<h2>
<a id="icd-9-codes" class="anchor" href="#icd-9-codes" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>ICD-9 codes</h2>

<p>ICD-9 codes are not numbers, and great care is needed when matching individual codes and ranges of codes. It is easy to make mistakes, hence the need for this package. ICD-9 codes can be presented in <em>short</em> 5 character format, or <em>decimal</em> format, with a decimal place separating the code into two groups. There are also codes beginning with V and E which have different validation rules. Zeroes after a decimal place are meaningful, so numeric ICD-9 codes cannot be used in most cases. In addition, most clinical databases contain invalid codes, and even decimal and non-decimal format codes in different places. This package primarily deals with ICD-9-CM (Clinical Modification) codes, but should be applicable or easily extendible to the original WHO ICD-9 system.</p>

<h2>
<a id="icd-10-codes" class="anchor" href="#icd-10-codes" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>ICD-10 codes</h2>

<p>ICD-10 has a somewhat simpler format, with consistent use of a letter, then two alphanumeric characters. However, especially for ICD-10-CM, there are a multitude of qualifiers, e.g. specifying recurrence, laterality, which vastly increase the number of possible codes. This package recognizes validity of codes by syntax alone, or whether the codes appear in a canonical list. The current ICD-10-CM master list is the 2016 set. There is no capability of converting between ICD-9 and ICD-10, but comorbidities can be generated from older ICD-9 codes and newer ICD-10 codes in parallel, and the comorbidities can then be compared.</p>

<h2>
<a id="examples" class="anchor" href="#examples" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Examples</h2>

<p>See also the vignettes and examples embedded in the help for each function for more. Here's a taste:</p>

<div class="highlight highlight-source-r"><pre><span class="pl-smi">patient_data</span>
<span class="pl-c">#&gt;   visit_id  icd9  poa</span>
<span class="pl-c">#&gt; 1     1000 40201    Y</span>
<span class="pl-c">#&gt; 2     1000  2258 &lt;NA&gt;</span>
<span class="pl-c">#&gt; 3     1000  7208    N</span>
<span class="pl-c">#&gt; 4     1000 25001    Y</span>
<span class="pl-c">#&gt; 5     1001 34400    X</span>
<span class="pl-c">#&gt; 6     1001  4011    Y</span>
<span class="pl-c">#&gt; 7     1002  4011    E</span>

<span class="pl-c"># reformat input data as needed</span>
icd_long_to_wide(<span class="pl-smi">patient_data</span>)
<span class="pl-c">#&gt;      [,1]    [,2]   [,3]   [,4]   </span>
<span class="pl-c">#&gt; 1000 "40201" "2258" "7208" "25001"</span>
<span class="pl-c">#&gt; 1001 "34400" "4011" NA     NA     </span>
<span class="pl-c">#&gt; 1002 "4011"  NA     NA     NA</span>

<span class="pl-c"># get comorbidities using Quan's application of Deyo's Charlson comorbidity groups</span>
icd_comorbid_quan_deyo(<span class="pl-smi">patient_data</span>)
<span class="pl-c">#&gt;         MI   CHF   PVD Stroke Dementia Pulmonary Rheumatic   PUD LiverMild</span>
<span class="pl-c">#&gt; 1000 FALSE  TRUE FALSE  FALSE    FALSE     FALSE     FALSE FALSE     FALSE</span>
<span class="pl-c">#&gt; 1001 FALSE FALSE FALSE  FALSE    FALSE     FALSE     FALSE FALSE     FALSE</span>
<span class="pl-c">#&gt; 1002 FALSE FALSE FALSE  FALSE    FALSE     FALSE     FALSE FALSE     FALSE</span>
<span class="pl-c">#&gt;         DM  DMcx Paralysis Renal Cancer LiverSevere  Mets   HIV</span>
<span class="pl-c">#&gt; 1000  TRUE FALSE     FALSE FALSE  FALSE       FALSE FALSE FALSE</span>
<span class="pl-c">#&gt; 1001 FALSE FALSE      TRUE FALSE  FALSE       FALSE FALSE FALSE</span>
<span class="pl-c">#&gt; 1002 FALSE FALSE     FALSE FALSE  FALSE       FALSE FALSE FALSE</span>

<span class="pl-c"># find diagnoses present on admission:</span>
icd_filter_poa(<span class="pl-smi">patient_data</span>)
<span class="pl-c">#&gt;   visit_id  icd9</span>
<span class="pl-c">#&gt; 1     1000 40201</span>
<span class="pl-c">#&gt; 4     1000 25001</span>
<span class="pl-c">#&gt; 6     1001  4011</span>

<span class="pl-c"># get comorbidities based on present-on-arrival diagnoses, use magrittr to flow the data</span>
<span class="pl-smi">patient_data</span> %<span class="pl-k">&gt;</span>% <span class="pl-smi">icd_filter_poa</span> %<span class="pl-k">&gt;</span>% <span class="pl-smi">icd_comorbid_quan_deyo</span>
<span class="pl-c">#&gt;         MI   CHF   PVD Stroke Dementia Pulmonary Rheumatic   PUD LiverMild</span>
<span class="pl-c">#&gt; 1000 FALSE  TRUE FALSE  FALSE    FALSE     FALSE     FALSE FALSE     FALSE</span>
<span class="pl-c">#&gt; 1001 FALSE FALSE FALSE  FALSE    FALSE     FALSE     FALSE FALSE     FALSE</span>
<span class="pl-c">#&gt;         DM  DMcx Paralysis Renal Cancer LiverSevere  Mets   HIV</span>
<span class="pl-c">#&gt; 1000  TRUE FALSE     FALSE FALSE  FALSE       FALSE FALSE FALSE</span>
<span class="pl-c">#&gt; 1001 FALSE FALSE     FALSE FALSE  FALSE       FALSE FALSE FALSE</span></pre></div>

<p>Look at the help files for details and examples of almost every function in this package.</p>

<div class="highlight highlight-source-r"><pre>?<span class="pl-smi">icd_is_valid</span>
?<span class="pl-smi">icd_comorbid</span></pre></div>

<p>Note that reformatting from wide to long and back is not as straightforward as using the various Hadley Wickham tools for doing this: knowing the more detailed structure of the data let's us do this better for the case of dealing with ICD codes.</p>

<h2>
<a id="install" class="anchor" href="#install" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Install</h2>

<p>The latest version is available in <a href="https://github.com/jackwasey/icd">github icd</a>, and can be installed with:</p>

<div class="highlight highlight-source-r"><pre>    install.packages(<span class="pl-s"><span class="pl-pds">"</span>devtools<span class="pl-pds">"</span></span>)
    <span class="pl-e">devtools</span><span class="pl-k">::</span>install_github(<span class="pl-s"><span class="pl-pds">"</span>jackwasey/icd<span class="pl-pds">"</span></span>)</pre></div>

<p>The <em>master</em> branch at github should always build and pass all tests and R CMD check, and will be similar or identical to the most recent CRAN release. The CRAN releases are stable milestones. Contributions and bug reports are encouraged and essential for this package to remain current and useful to the many people who have installed it.</p>

<h2>
<a id="advanced" class="anchor" href="#advanced" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Advanced</h2>

<h3>
<a id="source-data-and-sas-format-files" class="anchor" href="#source-data-and-sas-format-files" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Source Data and SAS format files</h3>

<p>In the spirit of reproducible research, all the R data files in this package can be recreated from source. The size of the source files makes it cumbersome to include them in the R package available on CRAN. Using the github source, you can pull the original data and SAS format files, and rebuild the data; or use the tools provided by this package to update the data using new source data files, e.g. when ICD-10-CM 2017 is released.</p>

<p>Doing the parsing requires additional dependencies, which are not gratuitously included in the package requirements, since most users won't need them. Benchmarking this package also has additional requirements. These are: - xml2 - ggplot2 - digest</p>

<h3>
<a id="automated-testing" class="anchor" href="#automated-testing" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Automated testing</h3>

<p>One of the strengths of this package is a thorough test suite, including over 10,000 lines of testing code.</p>

<pre><code>find tests -type f -exec cat '{}' + | wc -l
10098
</code></pre>

<p>A better metric of testing and code quality is code coverage, for which <a href="https://codecov.io/github/jackwasey/icd">codecov</a> and <a href="https://coveralls.io/github/jackwasey/icd">coveralls</a> are used. The automated <a href="https://app.wercker.com/#applications/5609d41e71f137d02f0a1069">wercker</a> builds report test coverage results to <a href="https://codecov.io/github/jackwasey/icd">codecov</a>, whereas the <a href="https://travis-ci.org/jackwasey/icd">travis</a> builds report coverage to <a href="https://coveralls.io/github/jackwasey/icd">coveralls</a>. The parsing code is a significant chunk of code, and may or may not be included in the automated builds depending on whether the source data is available. With the data available, test coverage is &gt;95%.</p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/jackwasey/icd">icd</a> is maintained by <a href="https://github.com/jackwasey">jackwasey</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

            <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-11402154-2");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>
